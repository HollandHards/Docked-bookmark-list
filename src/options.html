<!DOCTYPE html>
<html>
<head>
  <title>Dock Settings</title>
  <style>
    :root { --accent-color: #007aff; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f5f7; margin: 0; padding: 20px; color: #333; max-width: 800px; margin: 0 auto; }
    h1 { text-align: center; margin-bottom: 20px; font-weight: 600; }
    .container { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
    
    /* Grid Layout */
    .settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
    .section-title { grid-column: 1 / -1; font-size: 14px; font-weight: 700; text-transform: uppercase; color: #888; margin-top: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }

    .setting-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    label { font-weight: 500; font-size: 14px; }
    
    input[type="checkbox"] { transform: scale(1.2); accent-color: var(--accent-color); }
    select, input[type="text"] { padding: 6px; border-radius: 6px; border: 1px solid #ddd; width: 140px; }
    input[type="range"] { accent-color: var(--accent-color); vertical-align: middle; }
    
    /* List Styling */
    #list { margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px; max-height: 400px; overflow-y: auto; }
    .bm-item { background: #fff; border: 1px solid #eee; padding: 10px; margin-bottom: 8px; border-radius: 8px; display: flex; flex-direction: column; gap: 8px; transition: transform 0.2s, box-shadow 0.2s; }
    .bm-item.dragging { opacity: 0.5; border: 2px dashed var(--accent-color); }
    .bm-item.drag-over { border-top: 2px solid var(--accent-color); transform: translateY(2px); }
    .bm-row-main { display: flex; justify-content: space-between; align-items: center; cursor: grab; }
    .bm-row-icon { display: flex; gap: 10px; align-items: center; background: #f9f9f9; padding: 5px; border-radius: 6px; }
    .bm-info { display: flex; align-items: center; gap: 10px; flex: 1; overflow: hidden; }
    .bm-info img { width: 32px; height: 32px; border-radius: 6px; object-fit: contain; }
    .hidden { display: none; }

    /* Buttons */
    button { cursor: pointer; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; transition: opacity 0.2s; }
    button:hover { opacity: 0.8; }
    .btn-red { background: #ff3b30; color: white; }
    .btn-orange { background: #ff9500; color: white; }
    .btn-blue { background: var(--accent-color); color: white; }
    .btn-grey { background: #e5e5ea; color: #333; }
    .add-box { display: flex; gap: 10px; margin-bottom: 20px; background: #f0f0f5; padding: 15px; border-radius: 10px; flex-wrap: wrap; }
    
    .color-picker-wrapper { display: flex; align-items: center; gap: 10px; }
  </style>
</head>
<body>
  <h1>Dock Settings</h1>
  <div class="container">
    
    <div class="settings-grid">
      <div class="section-title">Behavior</div>
      
      <div class="setting-row">
        <label>Position</label>
        <select id="dockPosition">
          <option value="left">Left</option>
          <option value="right">Right</option>
          <option value="bottom">Bottom</option>
          <option value="top">Top</option>
        </select>
      </div>

      <div class="setting-row">
        <label>Screen Offset (<span id="vPosValue">50%</span>)</label>
        <input type="range" id="verticalPos" min="0" max="100" value="50">
      </div>

      <div class="setting-row">
        <label>Icon Size (<span id="sizeValue">48px</span>)</label>
        <input type="range" id="dockSize" min="32" max="128" value="48">
      </div>

      <div class="setting-row">
        <label title="Only open when pushing against screen edge">Edge Trigger Only</label>
        <input type="checkbox" id="edgeTrigger">
      </div>

      <div class="section-title">Appearance & Theme</div>

      <div class="setting-row">
        <label>Theme Style</label>
        <select id="separatorStyle">
          <option value="glass">Frosted Glass (Mac)</option>
          <option value="neon">Neon Dark</option>
          <option value="minimal">Minimal</option>
          <option value="classic">Classic White</option>
        </select>
      </div>

      <div class="setting-row">
        <label>Theme Color</label>
        <div class="color-picker-wrapper">
          <input type="checkbox" id="enableAccent">
          <div id="colorContainer" style="display:flex; align-items:center;">
             <input type="color" id="accentColor" value="#007aff" style="height:30px; width:50px; border:none; background:none;">
          </div>
        </div>
      </div>

      <div class="setting-row">
        <label>Show Tooltips</label>
        <input type="checkbox" id="showTooltips" checked>
      </div>

      <div class="setting-row">
        <label>Icon Glow/Zoom</label>
        <input type="checkbox" id="enableGlow" checked>
      </div>

      <div class="section-title">Visual Effects (New)</div>

      <div class="setting-row">
        <label>Backdrop Blur</label>
        <input type="range" id="backdropBlur" min="0" max="30" value="10" title="Control the frosted glass intensity">
      </div>

      <div class="setting-row">
        <label>Icon Shape</label>
        <select id="iconShape">
          <option value="12px">Rounded (Mac)</option>
          <option value="50%">Circle</option>
          <option value="0px">Square</option>
        </select>
      </div>

      <div class="setting-row">
        <label>Idle Opacity</label>
        <input type="range" id="idleOpacity" min="20" max="100" value="100" title="Fade dock when not in use">
      </div>

      <div class="setting-row">
        <label>Drop Shadow</label>
        <input type="checkbox" id="enableShadow" checked>
      </div>

    </div>

    <hr>
    
    <div class="add-box">
      <select id="itemType">
        <option value="link">Website Link</option>
        <option value="folder">New Folder</option>
        <option value="label">Text Label</option>
        <option value="spacer">Spacer (-)</option>
      </select>
      <input type="text" id="newTitle" placeholder="Title">
      <input type="text" id="newUrl" placeholder="https://example.com">
      <button class="btn-blue" id="addBtn">Add to Dock</button>
    </div>

    <div style="margin-bottom: 10px;">
        <label style="font-size:12px; color:#666;">Handler Icon URL (Optional):</label>
        <input type="text" id="handlerIcon" placeholder="https://..." style="width:100%; box-sizing:border-box;">
    </div>
    
    <h3 style="margin-top:20px;">Dock Items (Drag to Reorder)</h3>
    <div id="list">Loading...</div>
    
    <div style="margin-top:20px; font-size:12px; color:#666; text-align:center;">
      Shortcuts: <span id="currentShortcut" style="font-weight:bold;">Loading...</span> 
      <button id="openShortcutsBtn" class="btn-grey" style="margin-left:10px;">Change Shortcut</button>
      <br><br>
      Changes save automatically.
    </div>

  </div>
  <script src="adapter.js"></script>
  <script src="background.js"></script> <script src="options.js"></script>
</body>
</html>
